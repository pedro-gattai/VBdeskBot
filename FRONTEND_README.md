# VB Desk Frontend - Sealed-Bid Auction dApp

A modern Next.js + TypeScript + Tailwind CSS frontend for a Solana-based sealed-bid auction platform (Solana OTC desk).

## âœ¨ Features

- **Auction Browsing**: Browse active, pending, and completed auctions in a responsive grid
- **Phantom Wallet Integration**: Full wallet adapter support for Solana Devnet
- **Sealed Bid Placement**: Place cryptographically sealed bids with nonce-based security
- **Bid Reveal**: Reveal bids after auction closes with hash verification
- **Create Auctions**: Launch new auctions with customizable duration
- **Real-time Status**: Live bid tracking and auction countdown timer
- **Accessible UI**: ARIA labels, semantic HTML, keyboard navigation
- **Dark Theme**: Modern dark-mode design optimized for Web3 users

## ğŸ›  Tech Stack

- **Framework**: Next.js 14+ (React 18+)
- **Language**: TypeScript
- **Styling**: Tailwind CSS v4
- **Wallet**: @solana/wallet-adapter-react + Phantom
- **RPC**: Solana Devnet (configurable)

## ğŸ“ Project Structure

```
app/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx           # Root layout with wallet providers
â”‚   â”œâ”€â”€ page.tsx             # Home (auction list)
â”‚   â”œâ”€â”€ create/page.tsx      # Create new auction
â”‚   â”œâ”€â”€ auction/[id]/page.tsx  # Auction detail + bid forms
â”‚   â”œâ”€â”€ providers.tsx        # Wallet adapter config
â”‚   â””â”€â”€ globals.css          # Tailwind + component styles
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Navbar.tsx           # Navigation + wallet button
â”‚   â”œâ”€â”€ AuctionList.tsx      # Browse auctions grid
â”‚   â”œâ”€â”€ AuctionDetail.tsx    # Single auction info + bids
â”‚   â”œâ”€â”€ BidForm.tsx          # Place sealed bid
â”‚   â”œâ”€â”€ RevealForm.tsx       # Reveal bid with hash
â”‚   â””â”€â”€ CreateAuctionForm.tsx # Create new auction
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ next.config.ts
â””â”€â”€ .env.local              # Local environment vars
```

## ğŸš€ Getting Started

### Prerequisites
- Node.js 18+
- npm or yarn
- Phantom wallet browser extension

### Installation

```bash
cd app
npm install
```

### Development

```bash
npm run dev
```

The app will start on `http://localhost:3001` (or next available port).

### Build

```bash
npm run build
npm start
```

## ğŸ“ Environment Setup

1. Copy `.env.example` to `.env.local`:
```bash
cp .env.example .env.local
```

2. Update with your configuration:
```env
NEXT_PUBLIC_SOLANA_NETWORK=devnet
NEXT_PUBLIC_RPC_ENDPOINT=https://api.devnet.solana.com
NEXT_PUBLIC_PROGRAM_ID=YOUR_PROGRAM_ID_HERE
```

## ğŸ”Œ Wallet Connection

The app uses **Phantom wallet** as the primary provider. To test:

1. Install [Phantom Wallet](https://phantom.app)
2. Create/import a wallet on Solana Devnet
3. Get testnet SOL from [Solana Faucet](https://faucet.solana.com)
4. Click "Connect" in the navbar

## ğŸ“„ Pages

### Home (`/`)
- Displays all auctions in a responsive grid
- Shows current bid, status badge, time remaining
- Click any card to view full auction details

### Create (`/create`)
- Form to launch new auctions
- Fields: Title, Description, Starting Bid, Duration
- Requires connected wallet
- Signature-based authentication

### Auction Detail (`/auction/[id]`)
- Full auction info: title, description, current bid
- Live countdown timer
- Recent bids list
- **Bid Form**: Place sealed bid (amount + nonce â†’ hash)
- **Reveal Form**: Unlock bid after auction ends

## ğŸ” Security Model

**Sealed Bid Hash**: `SHA256(amount + nonce)`
- `amount`: Bid amount in SOL (e.g., "5.5")
- `nonce`: Random secret string (generated by user)
- Hash computed client-side, sent to contract

**Workflow**:
1. User enters bid amount + nonce â†’ hash generated
2. Hash signed via Phantom â†’ sent to contract's `placeBid()`
3. After auction ends: user reveals amount + nonce
4. Contract verifies: `SHA256(amount + nonce) == stored hash`
5. Winner determined by highest amount

## ğŸ¨ Component Guide

### BidForm
Places a sealed bid on an auction. 
- Validates amount > 0
- Requires wallet connection
- Shows feedback messages

### RevealForm
Reveals a previously placed bid.
- Hashes the amount + nonce client-side
- Compares with original sealed hash
- Updates contract state on success

### AuctionList
Displays all auctions.
- Mock data by default (replace with RPC calls)
- Status badges (active/pending/completed)
- Time remaining countdown

### CreateAuctionForm
Create new auction.
- Multi-field form validation
- Duration selector (24h to 1w)
- Wallet signature required

## ğŸ“Š UI Components & Utilities

### Tailwind Helpers
- `.btn-primary`: Blue button with hover state
- `.btn-secondary`: Gray button variant
- `.input-field`: Styled text input/textarea
- `.card-dark`: Card with slate styling
- `.status-badge`: Pill-shaped status indicator

### Status Badges
- `.status-active`: Green (auction ongoing)
- `.status-pending`: Yellow (reveal phase)
- `.status-completed`: Gray (auction closed)

## ğŸŒ Deployment

### Cloudflare Pages (Recommended)

1. **Setup**:
   - Push code to GitHub
   - Connect GitHub repo in Cloudflare Pages dashboard
   - Set build command: `npm run build` (in `app/` directory)
   - Set output directory: `.next`

2. **Environment Variables**:
   ```
   NEXT_PUBLIC_SOLANA_NETWORK=mainnet-beta
   NEXT_PUBLIC_RPC_ENDPOINT=https://api.mainnet-beta.solana.com
   NEXT_PUBLIC_PROGRAM_ID=YOUR_MAINNET_PROGRAM_ID
   ```

3. **GitHub Actions**:
   Automated deployment via `.github/workflows/deploy-cloudflare.yml`
   - Requires: `CLOUDFLARE_API_TOKEN`, `CLOUDFLARE_ACCOUNT_ID` secrets

### Vercel

```bash
vercel
```

### Manual

```bash
npm run build
# Upload `app/.next` to your server
npm start
```

## ğŸ§ª Testing Locally

1. Start dev server:
   ```bash
   npm run dev
   ```

2. Open http://localhost:3001

3. Connect Phantom wallet (use Devnet)

4. Test flows:
   - Browse auctions (mock data)
   - Create new auction
   - Place bid (sign message)
   - Reveal bid after time passes

## ğŸ”— Integration with Smart Contract

### Next Steps (Days 2-3)

Once backend team provides Anchor IDL:

1. **Create `hooks/useSolanaRpc.ts`**:
   ```typescript
   import { Connection, PublicKey } from '@solana/web3.js';
   
   export const useRpc = () => {
     const connection = new Connection(
       process.env.NEXT_PUBLIC_RPC_ENDPOINT!,
       'processed'
     );
     return connection;
   };
   ```

2. **Create `hooks/useAuction.ts`**:
   ```typescript
   import { useConnection, useWallet } from '@solana/wallet-adapter-react';
   import { Program, AnchorProvider } from '@project-serum/anchor';
   import IDL from '../idl/vb_desk.json';
   
   export const useAuction = () => {
     const { connection } = useConnection();
     const wallet = useWallet();
     
     const provider = new AnchorProvider(
       connection,
       wallet as any,
       { commitment: 'processed' }
     );
     
     const program = new Program(IDL as any, provider);
     
     return { program, provider };
   };
   ```

3. **Wire BidForm to contract**:
   ```typescript
   const { program } = useAuction();
   const tx = await program.methods
     .placeBid(auctionId, hashedBid)
     .accounts({ ... })
     .rpc();
   ```

## ğŸ“š API References

- [Solana Web3.js](https://solana-labs.github.io/solana-web3.js/)
- [Wallet Adapter React](https://github.com/solana-labs/wallet-adapter)
- [Phantom Wallet](https://docs.phantom.app/developers)
- [Next.js Docs](https://nextjs.org/docs)
- [Tailwind CSS](https://tailwindcss.com/docs)

## ğŸ› Troubleshooting

### Port 3000 in use
Dev server will auto-select 3001. Both work fine.

### Phantom not connecting
- Ensure Phantom is installed + unlocked
- Check that Devnet is selected in Phantom settings
- Try refreshing the page

### Build fails with "Bus error"
Memory constraint in build environment. Try:
```bash
npm run build -- --memory 1024
```

### Components not styled
Ensure Tailwind CSS is properly configured:
```bash
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init
```

## ğŸ“ Support

- **Issues**: GitHub issues
- **Discord**: [Solana Discord](https://discord.gg/solana)
- **Docs**: `/IMPLEMENTATION_GUIDE.md`

## ğŸ“ Changelog

### v0.2.0 (Current)
- âœ… Fixed edge runtime error
- âœ… Enhanced UI/UX with better cards, navigation
- âœ… Added accessibility (ARIA labels)
- âœ… Cloudflare Pages deployment config
- âœ… Environment variable setup

### v0.1.0
- Initial skeleton with components
- Wallet adapter setup
- Mock auction data

---

**Last updated**: Feb 3, 2025 | **Status**: Frontend-first mode | **Next**: Smart contract integration
